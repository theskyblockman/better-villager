execute as @e[type=area_effect_cloud,tag=summon_crafting_table, limit=1] at @s run function datameuh:reparation_table/summon
execute as @e[type=armor_stand,tag=repair_table_armor_stand] at @s unless block ~ ~0.25 ~ fletching_table run kill @s
execute unless entity @e[type=armor_stand,nbt={HandItems:[{tag:{}}, {}]}] run scoreboard players reset remove_point repair_point

# génération automatique
execute as @e[type=armor_stand,nbt={HandItems:[{id:'minecraft:bow'}, {}]}] unless data entity @s HandItems[{tag:{Damage: 0}}] at @s if score @p repair_point matches 1.. unless score remove_point repair_point matches 1.. run tellraw @p ["",{"text":"\u25c0\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u25b6","color":"gold"},{"text":"\n"},{"text":"[table de réparation] ","color":"gray"},{"text":"voulez vous réparer votre bow ? (note: toutes les states de l'item seront garder)","color":"yellow"},{"text":"\n\n"},{"text":"                      ","color":"#2EF222"},{"text":"[\u2714]","color":"#2EF222","clickEvent":{"action":"run_command","value":"/trigger trigger_2"}},{"text":"                      ","color":"yellow"},{"text":"[\u2716]","color":"#FF0003"},{"text":"\n"},{"text":"\u25c0\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u25b6","color":"gold"}]
execute as @e[type=armor_stand, nbt={HandItems:[{id:'minecraft:bow'}, {}]}] unless data entity @s HandItems[{tag:{Damage: 0}}] if score @p repair_point matches 1.. run scoreboard players set remove_point repair_point 1
execute as @e[type=armor_stand, nbt={HandItems:[{id:'minecraft:bow'}, {}]}] unless data entity @s HandItems[{tag:{Damage: 0}}] if score @p repair_point matches 1.. run scoreboard players enable @p trigger_2
execute if entity @e[scores={trigger_2=1..}] as @e[type=armor_stand,nbt={HandItems:[{id:'minecraft:bow'}, {}]}] unless data entity @s HandItems[{tag:{Damage: 0}}] at @s if score @p repair_point matches 1.. run function datameuh:reparation_table/reset
execute if entity @e[scores={trigger_2=1..}] as @e[type=armor_stand,nbt={HandItems:[{id:'minecraft:bow'}, {}]}] unless data entity @s HandItems[{tag:{Damage: 0}}] at @s if score @p repair_point matches 1.. run scoreboard players set @s trigger_2 0
